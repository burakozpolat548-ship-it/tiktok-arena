<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ã‡Ã¶l Kale SavaÅŸÄ±</title>

  <style>
    body {
      margin: 0;
      background: linear-gradient(#e2b56d, #d9b06c);
      font-family: Arial;
      overflow: hidden;
    }

    h1 {
      text-align: center;
    }

    #battlefield {
      position: relative;
      width: 100%;
      height: 90vh;
    }

    .castle {
      position: absolute;
      font-size: 60px;
      text-align: center;
    }

    #redCastle { left: 10%; top: 50%; }
    #blueCastle { right: 10%; top: 30%; }
    #greenCastle { right: 10%; top: 70%; }

    .hp {
      font-size: 20px;
      font-weight: bold;
    }

    .soldier {
      position: absolute;
      font-size: 28px;
    }
  </style>
</head>

<body>

<h1>ğŸœï¸ Ã‡Ã¶l Kale SavaÅŸÄ±</h1>

<div id="battlefield">

  <div id="redCastle" class="castle">
    ğŸ°
    <div class="hp">â¤ï¸ <span id="redHealth">100</span></div>
  </div>

  <div id="blueCastle" class="castle">
    ğŸ°
    <div class="hp">ğŸ’™ <span id="blueHealth">100</span></div>
  </div>

  <div id="greenCastle" class="castle">
    ğŸ°
    <div class="hp">ğŸ’š <span id="greenHealth">100</span></div>
  </div>

</div>

<script>

function spawn(team){
  const s = document.createElement("div")
  s.className = "soldier"
  s.innerText = "âš”ï¸"

  if(team === "red"){
    s.style.left = "10%"
    s.style.top = "50%"
  }

  if(team === "blue"){
    s.style.left = "80%"
    s.style.top = "30%"
  }

  if(team === "green"){
    s.style.left = "80%"
    s.style.top = "70%"
  }

  document.getElementById("battlefield").appendChild(s)

  setTimeout(() => {
    s.remove()
  }, 2000)
}

async function update(){
  const res = await fetch("/state")
  const data = await res.json()

  document.getElementById("redHealth").innerText = data.red.health
  document.getElementById("blueHealth").innerText = data.blue.health
  document.getElementById("greenHealth").innerText = data.green.health

  if(data.red.health <= 0){
    alert("â¤ï¸ RED KALE YIKILDI!")
  }
  if(data.blue.health <= 0){
    alert("ğŸ’™ BLUE KALE YIKILDI!")
  }
  if(data.green.health <= 0){
    alert("ğŸ’š GREEN KALE YIKILDI!")
  }
}

setInterval(update, 1000)

</script>

</body>
</html>
