<!DOCTYPE html>
<html>
<head>
<title>Ã‡Ã¶l Kale SavaÅŸÄ±</title>
<style>
body {
  margin:0;
  font-family:Arial;
  background: linear-gradient(#d8a55d,#f2d28a);
  text-align:center;
}

h1{
  margin-top:20px;
}

.arena{
  display:flex;
  justify-content:space-around;
  margin-top:80px;
}

.castle{
  width:25%;
}

.tower{
  width:100%;
  height:200px;
  background:#444;
  border-radius:10px 10px 0 0;
}

.red{ background:#aa2a2a; }
.blue{ background:#2a4daa; }
.green{ background:#2a8a2a; }

.hpbar{
  height:25px;
  background:#222;
  margin-top:10px;
  border-radius:20px;
  overflow:hidden;
}

.hp{
  height:100%;
  width:0%;
  background:lime;
  transition:0.5s;
}

#winner{
  font-size:40px;
  margin-top:40px;
  display:none;
}
</style>
</head>
<body>

<h1>ğŸœï¸ Ã‡Ã¶l Kale SavaÅŸÄ±</h1>

<div class="arena">

  <div class="castle">
    <div class="tower red"></div>
    <div class="hpbar"><div id="red" class="hp"></div></div>
  </div>

  <div class="castle">
    <div class="tower blue"></div>
    <div class="hpbar"><div id="blue" class="hp"></div></div>
  </div>

  <div class="castle">
    <div class="tower green"></div>
    <div class="hpbar"><div id="green" class="hp"></div></div>
  </div>

</div>

<div id="winner"></div>

<script>
async function update(){
  const res = await fetch("/teams")
  const data = await res.json()

  document.getElementById("red").style.width = data.red + "%"
  document.getElementById("blue").style.width = data.blue + "%"
  document.getElementById("green").style.width = data.green + "%"

  if(data.red>=100) showWinner("ğŸ”´ KIRMIZI KALE KAZANDI")
  if(data.blue>=100) showWinner("ğŸ”µ MAVÄ° KALE KAZANDI")
  if(data.green>=100) showWinner("ğŸŸ¢ YEÅÄ°L KALE KAZANDI")
}

function showWinner(text){
  const win = document.getElementById("winner")
  win.innerText = text
  win.style.display="block"
}

setInterval(update,1000)
</script>

</body>
</html>
