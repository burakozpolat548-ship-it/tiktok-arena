<!DOCTYPE html>
<html>
<head>
<title>Ã‡Ã¶l SavaÅŸ ArenasÄ±</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:linear-gradient(#e0b46a,#f4d48b);
  font-family:Arial;
  text-align:center;
}
h1{margin:10px}
#battlefield{
  position:relative;
  width:100%;
  height:80vh;
}
.castle{
  position:absolute;
  font-size:80px;
}
#redCastle{ left:5%; top:50%; transform:translateY(-50%); }
#blueCastle{ right:5%; top:30%; }
#greenCastle{ right:5%; bottom:30%; }
.soldier{
  position:absolute;
  font-size:28px;
}
</style>
</head>
<body>

<h1>ğŸœï¸ Ã‡Ã¶l Kale SavaÅŸÄ±</h1>

<div id="battlefield">
  <div id="redCastle" class="castle">ğŸ°</div>
  <div id="blueCastle" class="castle">ğŸ°</div>
  <div id="greenCastle" class="castle">ğŸ°</div>
</div>

<script>

let lastScore={red:0,blue:0,green:0}

function spawn(team){
  const s=document.createElement("div")
  s.className="soldier"
  s.innerText="âš”ï¸"

  if(team=="red"){
    s.style.left="10%"
    s.style.top="50%"
  }
  if(team=="blue"){
    s.style.left="80%"
    s.style.top="30%"
  }
  if(team=="green"){
    s.style.left="80%"
    s.style.top="70%"
  }

  document.getElementById("battlefield").appendChild(s)
}

async function update(){
  const res=await fetch("/teams")
  const data=await res.json()

  if(data.red>lastScore.red){
    spawn("red")
    lastScore.red=data.red
  }
  if(data.blue>lastScore.blue){
    spawn("blue")
    lastScore.blue=data.blue
  }
  if(data.green>lastScore.green){
    spawn("green")
    lastScore.green=data.green
  }
}

setInterval(update,1000)

</script>

</body>
</html>
